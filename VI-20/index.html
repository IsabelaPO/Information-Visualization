<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Streaming Platforms Dashboard</title>
    <script src="/d3/d3.v7.min.js"></script>
    <script src="/d3/d3-sankey.min.js"></script>
    <script src="script.js"></script>

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="dashboard-wrapper">
      <header>
        <div>
          <h1>Streaming Platforms</h1>
        </div>
        <button class="remove-filters-btn-pp">Remove All Filters</button>
        </header>

      <div id="loading"><div class="spinner"></div></div>

      <div id="filters-panel">
      <button id="close-filters-btn">Close</button>
        <div class="filter-group">
          <label>Platforms</label>
          <div class="platform-buttons">
            <button data-platform="Netflix">Netflix</button>
            <button data-platform="Amazon">Amazon</button>
            <button data-platform="Disney">Disney</button>
            <button data-platform="HBO">HBO</button>
            <button data-platform="Paramount">Paramount</button>
            <button data-platform="Apple">Apple</button>
          </div>
        </div>
        <div class="filter-group">
          <label>Content Type</label>
          <div class="content-type-filter">
            <button content-type-filter="SHOW">TV Shows</button>
            <button content-type-filter="MOVIE">Movies</button>
          </div>
        </div>
        <div class="filter-group">
          <label>Genres</label>
          <input type="text" id="genre-search" class="genre-search" placeholder="Search genre..." aria-label="Search genre">
          <button id="select-all-genres" class="select-all-button">Deselect All</button>
          <div class="genre-list" id="genre-filter-list"></div>
        </div>
        <div class="filter-group">
          <label>Production Location</label>

          <div class="view-toggle">
            <button id="view-continents-btn" class="toggle-btn active">Continents</button>
            <button id="view-countries-btn" class="toggle-btn">Countries</button>
          </div>
          <input type="text" id="country-continent-search" class="country-continent-search" placeholder="Search continents..." aria-label="Search continents">
          <div id="continent-view-container">
            <button id="select-all-continents" class="select-all-button">Deselect All</button>
            <div id="continent-filter-list" class="country-list"></div>
          </div>

          <div id="country-view-container" style="display: none;">
            <button id="select-all-countries" class="select-all-button">Deselect All</button>
            <div id="country-filter-list" class="country-list"></div>
          </div>
        </div>
        <div class="filter-group">
          <label>Target Audience</label>
          <div class="audience-buttons">
            <button audience-buttons="toddlers">Toddler</button>
            <button audience-buttons="child">Children</button>
            <button audience-buttons="teenager">Teenager</button>
            <button audience-buttons="adult">Adult</button>
          </div>
        </div>
        <div class="filter-group">
          <label>IMDB Score</label>
          <div id="imdb-slider-container" class="d3-slider-container"></div>
          <div class="slider-labels">
            <span id="imdb-min-value">1.0</span>
            <span id="imdb-max-value">10.0</span>
          </div>
        </div>
        <button class="remove-filters-btn">Remove All Filters</button>
      </div>
      <button id="open-filters-btn" class="open-filters-btn" onclick="toggleFilters()">
        <img class="filter-icon" src="filter-icon.svg" alt="Filter Icon">
        <span class="tooltip-text">Filters</span>
      </button>

      <div id="timeline-filter">
        <div class="viz-card-header">Filter by Release Year</div>
        <div id="year-slider-container" class="d3-slider-container"></div>
        <div class="slider-labels">
          <span id="year-min-value">...</span>
          <span id="year-max-value">...</span>
        </div>
      </div>
      
      <div class="viz-panel">
        <div id="treemap-chart" class="viz-card">
          
          <div class="viz-toggle" id="treemap-toggle">
            <button id="treemap-view-continents" class="toggle-btn active">Continents</button>
            <button id="treemap-view-countries" class="toggle-btn">Countries</button>
          </div>
          
          <button id="treemap-back-continents-btn" class="back-button">Continents</button> 
            
          <button id="treemap-back-countries-btn" class="back-button">Countries</button>
        
        </div>

        <div id="quantity-chart" class="viz-card">
          <button id="quantity-back-btn" class="back-button">Back to Comparison</button>
        </div>

        <div id="sankey-chart" class="viz-card">
          <button id="sankey-back-btn" class="back-button">Undo Filter</button>
        </div>
      </div>
    </div>
  </body>
</html>